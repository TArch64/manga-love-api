version: '3.8'

x-api-common: &api_common
    image: manga_love_api
    build: .
    stdin_open: true
    volumes:
      - .:/app
      - ./node_modules:/app/node_modules
    networks:
      - love
    env_file:
      - ./.env
#    depends_on:
#      - db

services:
  gateway:
    <<: *api_common
    container_name: manga_love_api
    command: npm run start:dev gateway

#  db:
#    container_name: manga_love_psql
#    image: postgres:15-alpine
#    volumes:
#      - data_psql:/var/lib/postgresql/data
#    networks:
#      - love
#    env_file:
#      - ./.env

#volumes:
#  data_psql:
#    driver: local

networks:
  love:
